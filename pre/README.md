コードの概要
このTypeScriptコードは、入力された行データに基づいて4つの異なるステップ（ステップ1からステップ4）を処理するシステムです。各ステップは、レストランの注文管理、電子レンジの管理、注文の完了通知、会計申請など、特定の機能を担当しています。コードは主に以下の部分で構成されています。

メイン関数 (main)
各ステップの処理関数 (handleStep1 ～ handleStep4)
標準入力からデータを読み取る関数 (readFromStdin)
1. メイン関数 (main)
main関数は、入力されたデータの最初の行からステップ番号（1～4）を解析し、対応するハンドラ関数を呼び出します。ステップ番号が無効な場合、エラーメッセージを出力して処理を終了します。

主な処理:

最初の行をステップ番号として解析。
ステップ番号に応じてhandleStep1からhandleStep4のいずれかを呼び出す。
無効なステップ番号の場合はエラーメッセージを表示。
2. 各ステップの処理関数
各ステップは特定の機能を担当しており、入力データのフォーマットや処理内容が異なります。以下、それぞれのハンドラ関数について説明します。

2.1 ステップ1の処理 (handleStep1)
ステップ1では、メニュー情報の読み込みと注文の処理を行います。

主な処理:

メニュー項目の数を解析し、menuItemsというマップにメニュー情報（料理番号、在庫数、価格）を格納。
残りの行は注文情報として処理。各注文が有効かどうかを検証し、在庫が十分であれば注文を受理し、在庫を減少させる。そうでなければ「sold out」を出力。
エラーハンドリング:

メニュー情報や注文情報のフォーマットや値の範囲を厳密に検証。不正なデータがあればエラーメッセージを出力し、該当の処理をスキップ。
2.2 ステップ2の処理 (handleStep2)
ステップ2では、電子レンジの管理と注文の調理状況を扱います。

主な処理:

メニュー数と電子レンジの数を解析し、メニュー情報をmenuSetに格納。
電子レンジの空き状況を管理し、注文を調理開始または待機キューに追加。
調理完了イベントに応じて、待機キューから次の注文を処理。
データ構造:

cookingMap: 現在調理中の料理番号とその数を追跡。
orderQueue: 電子レンジが使用中の場合の待機注文をキューとして保持。
エラーハンドリング:

イベントのフォーマットや値の範囲を検証。不正な入力にはエラーメッセージを出力し、適切なレスポンスを返す。
2.3 ステップ3の処理 (handleStep3)
ステップ3では、注文の完了を管理し、準備が整った注文を通知します。

主な処理:

メニュー情報をmenuSetに格納。
注文をorderMapに追加。
調理完了イベントに応じて、対応するテーブルに「ready」メッセージを出力。
データ構造:

orderMap: 料理番号ごとに注文されたテーブル番号をリストとして保持。
エラーハンドリング:

イベントのフォーマットや値の範囲を検証。不正な入力にはエラーメッセージを出力し、適切なレスポンスを返す。
2.4 ステップ4の処理 (handleStep4)
ステップ4では、注文の管理、提供、会計申請を扱います。

主な処理:

メニュー情報をmenuPricesに格納。
注文をseatOrdersに記録し、提供状況をseatServedで管理。
「ready」イベントで提供済みの料理を更新。
「check」イベントで全ての注文が提供されているか確認し、合計金額を出力。
データ構造:

seatOrders: 席番号ごとの注文内容（料理番号と数量）。
seatServed: 席番号ごとの提供済み料理内容（料理番号と数量）。
seatTotals: 席番号ごとの合計金額。
エラーハンドリング:

イベントのフォーマットや値の範囲を検証。不正な入力にはエラーメッセージを出力し、適切なレスポンスを返す。
3. 標準入力からデータを読み取る関数 (readFromStdin)
readFromStdin関数は、標準入力（stdin）からデータを非同期に読み取り、行ごとの文字列配列として返します。データの読み取りが完了した後、main関数を呼び出して処理を開始します。

主な処理:

stdinのデータをdata変数に蓄積。
endイベントが発生したら、dataをトリムして改行で分割し、main関数に渡す。
全体の流れ
入力データの読み取り:
標準入力からデータを読み取り、行ごとの配列としてmain関数に渡す。
ステップの選択:
最初の行でステップ番号（1～4）を取得し、対応するハンドラ関数を呼び出す。
各ステップの処理:
ステップごとに異なる処理を実行。主にメニュー情報の読み込みと注文・イベントの処理。
出力:
各ステップで適切なレスポンス（例:「received order」、「sold out」、「wait」、「ready」、「ok」、合計金額など）を標準出力に出力。
